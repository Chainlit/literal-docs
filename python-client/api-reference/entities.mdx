---
title: Manipulating entities
description: "Create Read Update and Delete methods for Chainlit platform entities"
---

If you prefer to manipulate Chainlit plateform entities without using instrumentation, here is a collection of methods to do so.
Checkout the [authentication](/python-client/authentication) page for more information on how to instanciate a client.

All entities have a `to_dict` method that will help you visualize its content.

## User

### Create an User

```python
from chainlit_client import ChainlitClient

client = ChainlitClient()
new_user = client.api.create_user(identifier="John Doe")
```

<ParamField path="identifier" type="string">
  The identifier of the user
</ParamField>

### Get an User

```python
user = client.api.get_user(id="1234")
```

<ParamField path="id" type="string">
  The id of the user
</ParamField>

<Warning>If the user does not exist `None` is returned</Warning>

### Update an User

```python
updated_user = client.api.update_user(id="1234", identifier="Jane Doe")
```

<ParamField path="id" type="string">
  The id of the user
</ParamField>

<ParamField path="identifier" type="string">
  The identifier of the user
</ParamField>

<ParamField path="metadata" type="dict">
  The metadata of the user
</ParamField>

### Delete an User

```python
user = client.api.delete_user(id="1234")
```

<ParamField path="id" type="string">
  The id of the user
</ParamField>

## Thread

Checkout the documentation about [threads](/concepts/thread) for more information.

### Fetching threads

You can query threads with filter:

```python
threads = client.api.list_threads(first=None, after=None, filters=None)

print(threads["pageInfo"])
for thread in threads["data"]:
    print(thread.to_dict())
```

<ParamField path="first after" type="int">
  Pagination parameters, checkout [GraphQL
  doc](https://graphql.org/learn/pagination/) for more information
</ParamField>

<ParamField path="filter" type="dict">
  Filter for threads
</ParamField>

The following options are valid:

- attachmentsName
- createdAt
- afterCreatedAt
- beforeCreatedAt
- duration
- environment
- feedbacksValue
- participantsIdentifier
- search
- tokenCount

You can also fetch a single thread by id

```python
thread = client.api.get_thread(id="1234")
```

<ParamField path="id" type="string">
  The id of the thread
</ParamField>

### Update thread

```python
updated_thread = client.update_thread(
    id="1234",
    metadata=None,
    participant_id=None,
    environment=None,
    tags=None,
)
```

<ParamField path="id" type="string">
  The id of the thread
</ParamField>

<ParamField path="metadata" type="dict">
  The metadata of the thread
</ParamField>

<ParamField path="participant_id" type="string">
  The participant id of the thread
</ParamField>

<ParamField path="environment" type="string">
  The environment of the thread
</ParamField>

<ParamField path="tags" type="list">
  The tags of the thread
</ParamField>

### Upsert tread

It will either create a new thread is the thread_id does not exist of update the existing one.

```python
thread = client.upsert_thread(
    thead_id="1234",
    metadata=None,
    participant_id=None,
    environment=None,
    tags=None
)
```

<ParamField path="thread_id" type="string">
  The id of the thread
</ParamField>

<ParamField path="metadata" type="dict">
  The metadata of the thread
</ParamField>

<ParamField path="participant_id" type="string">
  The participant id of the thread
</ParamField>

<ParamField path="environment" type="string">
  The environment of the thread
</ParamField>

<ParamField path="tags" type="list">
  The tags of the thread
</ParamField>

### Delete thread

```python
client.api.delete_thread(id="1234")
```

<ParamField path="id" type="string">
  The id of the thread
</ParamField>

## Step

Checkout the documentation about [steps](/concepts/step) for more information.

### Create a step

```python
step = client.api.create_step(
    thread_id: "1234"
    type = "undefined",
)
```

<ParamField path="thread_id" type="string">
  The id of the thread
</ParamField>

<ParamField path="type" type="string">
  The type of the step
</ParamField>

<ParamField path="start_time" type="string">
  Starting time in string format
</ParamField>

<ParamField path="end_time" type="string">
  Ending time in string format
</ParamField>

<ParamField path="input" type="string">
  Input in string format
</ParamField>

<ParamField path="output" type="string">
  Output in string format
</ParamField>

<ParamField path="metadata" type="dict">
  Metadata as a dict
</ParamField>

<ParamField path="parent_id" type="string">
  Parent ID in string format
</ParamField>

<ParamField path="name" type="string">
  Name in string format
</ParamField>

<ParamField path="tags" type="List[string]">
  List of tags in string format
</ParamField>

### Update a step

```python
step = client.api.update_step(
  id="1234",
  type = "user_message",
)
```

<ParamField path="id" type="string">
  Id as a string
</ParamField>

<ParamField path="type" type="StepType">
  Type of the step as StepType
</ParamField>

<ParamField path="input" type="string">
  Input in string format
</ParamField>

<ParamField path="output" type="string">
  Output in string format
</ParamField>

<ParamField path="metadata" type="Dict">
  Metadata in dictionary format
</ParamField>

<ParamField path="name" type="string">
  Name in string format
</ParamField>

<ParamField path="tags" type="List[string]">
  List of tags in string format
</ParamField>

<ParamField path="start_time" type="string">
  Start time as a string
</ParamField>

<ParamField path="end_time" type="string">
  End time as a string
</ParamField>

<ParamField path="parent_id" type="string">
  Parent identifier as a string
</ParamField>

### Get a step

```python
step = client.api.get_step(
  id="1234",
)
```

<ParamField path="id" type="string">
  Id as a string
</ParamField>

### Delete a step

```python
step = client.api.delete_step(
  id="1234",
)
```

<ParamField path="id" type="string">
  Id as a string
</ParamField>

### Send Steps

Used to send multiple steps at the same time to the Chainlit platform.

```python
steps = [
    {
        "thread_id": "1234",
        "type": "undefined",
    },
    {
        "thread_id": "1234",
        "type": "undefined",
    },
]

client.api.send_steps(steps=[Step.from_dict(step) for step in steps])
```

## Attachment

### Attachment create

```python
attachment = client.api.create_attachment(
    thread_id="1234",
    name="my_attachment",
    content_type="text/plain",
    content="Hello world",
)
```

<ParamField path="thread_id" type="string">
  Thread id in string format
</ParamField>

<ParamField path="step_id" type="string">
  Step id in string format
</ParamField>

<ParamField path="id" type="string">
  Id in string format
</ParamField>

<ParamField path="metadata" type="Dict">
  Metadata in dictionary format
</ParamField>

<ParamField path="mime" type="string">
  Mime in string format
</ParamField>

<ParamField path="name" type="string">
  Name in string format
</ParamField>

<ParamField path="object_key" type="string">
  Object key in string format
</ParamField>

<ParamField path="url" type="string">
  Url in string format
</ParamField>

<ParamField path="content" type="Union[bytes, str]">
  Content that can be either of bytes or string format
</ParamField>

<ParamField path="path" type="string">
  Path in string format
</ParamField>

### Update attachment

```python
attachment = client.api.update_attachment(
    id="1234",
    update_params={
        "name": "my_attachment",
        "content_type": "text/plain",
        "content": "Hello world",
    },
)
```

### Get attachment

```python
attachment = client.api.get_attachment(id="1234")
```

<ParamField path="id" type="string">
  Id in string format
</ParamField>

### Delete attachment

```python
attachment = client.api.delete_attachment(id="1234")
```

<ParamField path="id" type="string">
  Id in string format
</ParamField>

## Feedback

### Create a feedback

```python
feedback = client.api.create_feedback(
    thread_id="1234",
    value=1,
    comment="Hello world",
)
```

<ParamField path="step_id" type="string">
  Step id in string format
</ParamField>

<ParamField path="value" type="int">
  Value in integer format, 1 for positive feedback and 0 for negative feedback
</ParamField>

<ParamField path="comment" type="str">
  Comment in string format
</ParamField>

<ParamField path="strategy" type="FeedbackStrategy">
  Strategy represented as FeedbackStrategy
</ParamField>

### Update a feedback

```python

feedback = client.api.update_feedback(
    id="1234",
    update_params={
        "comment": "Hello world",
    },
)
```

<ParamField path="id" type="string">
  Id in string format
</ParamField>

<ParamField path="update_params" type="dict">
  Dict containing same parameters as create_feedback
</ParamField>
